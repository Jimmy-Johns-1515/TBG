#include<Windows.h>
#include<iostream>
using namespace std;

//global variables
string inventory[10];
int dubloons = 100;
int health = 100;
int PetAff = 0;

//function declarations
void MonsterGen(); 
void itemDropper();
void Shop();
void BattleSystem();
void MonkeyActions();

int main() {
	//initialize it with all empty spaces
	for (int i = 0; i < 10; i++)
		inventory[i] = " ";
	




	cout << "Welcome to the End?" << endl;
	//game story underneath
	cout << "You enter a broken down house to investigate why nobody will go near the house or why people dissappear when they do.As you enter the house the door shuts and wont open. When you turn around you see a shadowy small figure run away. Was it amonkey???" << endl;

	//local variables
	int room = 1;
	char input;

	while (1) { //game loop
		cout << "Your Inventory:" << endl;
		for (int i = 0; i < 10; i++)
			cout << inventory[i] << " "; //shows the inventory along with the items
		cout << endl;
		switch (room) {
		case 1:
			system("color 70");
			MonsterGen();
			cout << "You enter to a destroyed looking living room where a couch sits in the middle, half of it missing and the stuffing everywhere. By the looks of it you can only go (s)traight" << endl;
			if (inventory[0] != "key")
				cout << "On the ground there is an old (k)ey." << endl;
			cout << "there's a sho(p) in the corner" << endl;
			cout << "a monkey?? seems like he wants headscratches. Press h to give head rubs" << endl;
			cin >> input;
			if (input == 'h') {
				cout << "he seems happy and starts following you. strange." << endl;
				PetAff += 10;
			}
			if (input == 's')
				room = 2;
			if (input == 'p')
				Shop();	
			if (input == 'k') {
				cout << "you got an old key!" << endl;
				inventory[0] = "key";
			}
			break;
		case 2:
			MonsterGen();//function call
			BattleSystem();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "As you enter this new room it starts to look less like a house and more like some psychos house. You can proceed to the (n)ext room or (r)eturn to the previous room." << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 'h') {
				cout << "he seems happy and starts following you. strange." << endl;
				PetAff += 10;
			}
			if (input == 'r')
				room = 1;
			else if (input == 'n')
				room = 3;
			if (input == 'b')
				itemDropper();	
			break;
		case 3:
			MonsterGen();
			MonkeyActions();
			system("color fesf");
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "a dragon appears!" << endl;
			cout << "You enter and it smells foul. It is hard to see with the occasional flashing light but in the corner there seems to be a human skull?!?! Do you go to the (n)ext room or (r)eturn to the previous room?" << endl;
			cin >> input;
			if (input == 'r')
				room = 2;
			else if (input == 'n')
				room = 4;
			break;
		case 4:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "This new room has blood smeared all around as if someone was trying to get away from something else. Lots of trash on the sticky floor. Do you wish to go to the (n)ext room or (r)eturn to the previous?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 'r')
				room = 3;
			else if (input == 'n')
				room = 5;
			if (input == 'b')
				itemDropper();
			break;
		case 5:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "It gets worse as you continue. The room pretty much looks the same as the previous but no you can hear some kind of noise. You can't tell what it is but you know its ahead. Do you go to the (n)ext room or (r)eturn to the previous?" << endl;
			cin >> input;
			if (input == 'r')
				room = 4;
			else if (input == 'n')
				room = 6;
			break;
		case 6:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "The sound continues playing but you still have no clue as to what it is. These rooms are looking exactly the same but if you look back you can tell its a new room. Do you go to the (n)ext or (r)eturn to the previous?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 'r')
				room = 5;
			else if (input == 'n')
				room = 7;
			if (input == 'b')
				itemDropper();	
			break;
		case 7:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "The room is pretty? As you enter there is a couch sitting in the middle, a very nice clean white couch and on the wall infront a stand that looks like its for a tv. Do you go to the (n)ext room or (r)eturn to the previous?" << endl;
			cin >> input;
			if (input == 'w')
				room = 6;
			else if (input == 'n')
				room = 8;
			break;
		case 8:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "This room is exactly the same as the previous but everything is placed on the side of the wall near the next door rather than in the middle. Do you go to the (n)ext or (r)eturn to the previous?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 's')
				room = 7;
			else if (input == 'e')
				room = 9;
			if (input == 'b')
				itemDropper();
			break;
		case 9:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "Now this room has a chandelier above the couch. It has a nice gold shine on it. You can proceed to the (n)ext or (r)eturn to the previous." << endl;
			cin >> input;
			if (input == 'w')
				room = 8;
			else if (input == 'n')
				room = 10;
			break;
		case 10:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "New room new things. The chandelier has fallen onto the couch where a skeleton lies. Looks like it fell on someone that was there. Do you proceed to the (n)ext or (r)eturn?" << endl;
			cin >> input;
			if (input == 's')
				room = 9;
			else if (input == 'n')
				room = 11;
			break;
		case 11:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "This room is upside down but looks the same as the previous? the chandelier is still 'fallen' but rather than it falling downward it fell upward toward the roof where the couch is now somehow at along with the tv stand. (n)ext or (p)revious room?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 's')
				room = 10;
			else if (input == 'e')
				room = 12;
			if (input == 'b')
				itemDropper();
			break;
		case 12:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "It's all gone. All except the chandelier and the skeleton. everything is now upright but much harder to see again with flckering lights. And the sound from before is back still hard to see but enough to make your way to the (n)ext room or the (p)revious, what do you choose?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 'w')
				room = 11;
			else if (input == 'n')
				room = 13;
			if (input == 'b')
				itemDropper();
			break;
		case 13:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "Once again, the lights are flickering making it hard to see. All thats left is a skeleton standing and watching you no matter where you move. Do you want to continue to the (n)ext room or (r)eturn?" << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 's')
				room = 12;
			else if (input == 'n')
				room = 14;
			if (input == 'b')
				itemDropper();
			break;
		case 14:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "The skeleton is now watching you while pointing at a closed door where you can hear the strange noise. It sounds like growling. Do you (test) it or do you (chicken) out? There will be no returning!!!" << endl;
			cin >> input;
			if (input == 's')
				room = 13;
			else if (input == 'e')
				room = 15;
			break;
		case 15:
			MonsterGen();
			MonkeyActions();
			cout << "MORE HEADRUBS!! press h" << endl;
			cout << "you're in room 15, you can return and go (w)est." << endl;
			cout << "theres a rusty (b)ox in the room" << endl;
			cin >> input;
			if (input == 'w')
				room = 14;
			if (input == 'b')
				itemDropper();
			break;
		}
	}
}


void MonkeyActions() {
	int num = rand() % 200;
	if (num < 25)
		cout << "the monkey starts screaming" << endl;
	else if (num < 50)
		cout << "the monkey jumps up and down for some reason" << endl;
	else if (num < 75)
		cout << "monkey monkey begins to scratch his but" << endl;
	else
		cout << "monkey is looking around at the ceiling for some reason" << endl;
}


void MonsterGen() {
	int num = rand() % 200; //creates a random num b/t 0-99
	if (num < 20)
		cout << "a skeleton spawned!" << endl;
	else if (num < 50)
		cout << "a spider appears!" << endl;
	else if (num < 70)
		cout << "a zombie attacks you!" << endl;
	else
		cout << "nothing spawned" << endl;
}

void itemDropper() {
	int num = rand() % 100; // b/t 0-99
	if (num < 25) {
		cout << "you got a dirty sock!" << endl;
		inventory[1] = "sock";
	}
	else if (num < 50) {
		cout << "you got a handful of legos!" << endl; \
			inventory[2] = "legos";
	}
	else if (num < 60) {
		cout << "you got a CHICKEN" << endl;

	}
	else {
		cout << "tough luck buddy, this one's empty" << endl;
	}
}

void Shop() {
	int input = 123456789012345678;
	while (input != 0) {
		cout << "welcome to the shop!" << endl;
		cout << "you have " << dubloons << " dubloons." << endl;
		cout << "items for sale:" << endl;
		cout << "1) sword: 20" << endl;
		cout << "2) potion: 10" << endl;
		cout << "3) armor: 50" << endl;
		cout << "to leave shop press b" << endl;
		cin >> input;
		if (input == 1) {
			if (dubloons >= 20) {
				cout << "you bought a sword!" << endl;
				inventory[1] = "sword";
				dubloons -= 20;
			}
			else
				cout << "Mann you too broke" << endl;
		}
		if (input == 2) {
			if (dubloons >= 10) {
				cout << "you bought a potion!" << endl;
				inventory[2] = "potion";
				dubloons -= 10;
			}
			else
				cout << "Get ya money up, not ya funny up";
		}
		if (input == 3) {
			if (dubloons >= 50) {
				cout << "you bought armor!" << endl;
				inventory[3] = "armor";
				dubloons -= 50;
			}
			else
				cout << "you think this is a joke??" << endl;
		if (input == 'b'){
			cout << "adios brudda" << endl;
			
		}
		
		}
	}
} //end of shop function


void BattleSystem() 
	{
	int MonsterHealth = 20;
	cout << "-------Round 1 FIGHT!!-------" << endl;
	while (health > 0 && MonsterHealth > 0) {
		if (inventory[1] == "shield") {
			cout << "while you're still in one piece, that still hurt" << endl;
			health -= 5;
		}
		else {
			cout << "the monster bites you for 10 damage" << endl;
			health -= 10;
		}
		//if (inventory[0] == "sword")
			//PlayerDamage *= 2
			//cout << "THE SWORD HITS HEAVY!!" << endl;
		//else {
		//	cout << "the monster took damage, but is not gone yet" << endl;
		//}
		//cout << "you hit the monster for 10 damage" << endl;
		//MonsterHealth -= 10;

	}
	cout << "--------------------" << endl;
	}
